<toast></toast>
<section id="cart">

  <div class="container">
      <md-toolbar class="md-table-toolbar md-accent">
        <div class="md-toolbar-tools">
          <h1>Shopping Cart</h1>
        </div>
      </md-toolbar>
      <md-divider></md-divider>
      <md-table-container class="md-whiteframe-4dp">
        <table md-table>
          <thead md-head>
            <tr md-row>
              <th md-column>Experience</th>
              <th md-column></th>
              <th md-column>Quantity</th>
              <th md-column>Price</th>
              <th md-column>Subtotal</th>
              <th md-column></th>
            </tr>
          </thead>
          <tbody>
            <tr class="md-subhead accent line dataText"  md-row ng-repeat="lineItem in cart.lineItems">

              <td md-cell>{{ lineItem.experienceId.name }}</td>

              <td md-cell><img class="img-responsive" ng-src="{{lineItem.experienceId.photoUrl}}"></td>


              <td md-cell>
                <h-number class="numInput" value="lineItem.quantity" min="1" max="{{lineItem.experienceId.quantity}}" step="1" change="updateCart(lineItem)"></h-number>
                <md-button flex="50" class="md-raised md-primary" ng-if="lineItem.expired === true" ng-if="lineItem.expired === true" ng-click="reAddExpiredLineItem(lineItem)">Item is expired. Add back to cart!</md-button>
                <timer interval="1000" countdown="100">{{countdown}}</timer>
              </td>

              <td md-cell>${{ lineItem.experienceId.price | number}}</td>
              <td md-cell>${{ lineItem.experienceId.price * lineItem.quantity  | number}}</td>


              <td md-cell><md-button class="md-icon-button" ng-click="removeFromCart(lineItem)"><md-icon class="material-icons md-18" ng-style="{ color: '#000000' }">remove_shopping_cart</md-icon></md-button></td>

            </tr>
            <tr class="accent line" ng-style="{ background: '#ef6145' }">
              <td md-cell></td>
              <td md-cell></td>
              <td md-cell></td>
              <td md-cell class="bold moveRight">Total</td>
              <td md-cell class="bold">${{ getSubtotal(cart) | number}}</td>
              <td md-cell></td>
            </tr>
          </tbody>
        </table>
      </md-table-container>

      <!-- <md-button class="md-primary bold pull-left" flex="15"  ng-click="expire()">Test expiring!</md-button> -->
      <md-button class="md-primary bold pull-right" flex="15"  ng-disabled="!cart.lineItems.length" ng-click="checkout()">
        Check out!
        <!-- <md-tooltip md-visible="showTooltip" md-direction="top">Add an experience to your cart</md-tooltip> -->
      </md-button>
      <md-button class="md-primary" flex="15"  ng-style="{ background: '#B9F6CA' }" ui-sref="orderHistoryPage">Find Orders</md-button>



  </div>

</section>
